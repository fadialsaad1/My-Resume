<!doctype html>
<html lang="en">
    <head>
        <link rel="stylesheet" href="Fadi.css" />
        <title>Project 1 - Snake Game</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                background-color: #fff;
                margin: 0;
                padding: 0;
                display: flex;
            }

            h1 {
                font-family: cursive;
                font-size: 36px;
                margin-bottom: 20px;
            }
        </style>
    </head>
    <body>
        <!-- Sidebar -->
        <div class="sidebar">
            <button onclick="location.href='index.html'">Profile</button>
            <button onclick="location.href='Fadi1.html'">Hobbies</button>
            <button onclick="location.href='Fadi2.html'">Project 1</button>
        </div>

        <!-- Main Content -->
        <div class="content1">
            <h1>ðŸŽ® Project 1: Snake Game</h1>
            <canvas id="gameCanvas" width="650" height="650"></canvas>
            <div id="score">Score: 0</div>
            <button id="restartBtn" onclick="restartGame()">Restart Game</button>
            <button id="pauseBtn" onclick="togglePause()">Pause Game</button>
        </div>

        <script>
            const canvas = document.getElementById("gameCanvas");
            const ctx = canvas.getContext("2d");

            const box = 25;
            let snake, direction, food, score, game;

            let paused = false;

            function togglePause() {
                paused = !paused;
                document.getElementById("pauseBtn").textContent = paused ? "Resume Game" : "Pause Game";
            }

            function initGame() {
                snake = [{ x: 9 * box, y: 10 * box }];
                direction = null;
                food = {
                    x: Math.floor(Math.random() * (canvas.width / box)) * box,
                    y: Math.floor(Math.random() * (canvas.height / box)) * box
                };
                score = 0;
                document.getElementById("score").textContent = "Score: " + score;
                if (game) clearInterval(game);
                game = setInterval(draw, 100);
            }

            document.addEventListener("keydown", setDirection);

            function setDirection(event) {
                if ([37, 38, 39, 40].includes(event.keyCode)) {
                    event.preventDefault(); // â›” stop page from scrolling
                }

                if (event.keyCode === 37 && direction !== "RIGHT") direction = "LEFT";
                else if (event.keyCode === 38 && direction !== "DOWN") direction = "UP";
                else if (event.keyCode === 39 && direction !== "LEFT") direction = "RIGHT";
                else if (event.keyCode === 40 && direction !== "UP") direction = "DOWN";
            }

            function collision(newHead, snake) {
                return snake.some((s) => s.x === newHead.x && s.y === newHead.y);
            }

            function drawRoundedRect(x, y, w, h, radius, color) {
                ctx.fillStyle = color;
                ctx.beginPath();
                ctx.moveTo(x + radius, y);
                ctx.lineTo(x + w - radius, y);
                ctx.quadraticCurveTo(x + w, y, x + w, y + radius);
                ctx.lineTo(x + w, y + h - radius);
                ctx.quadraticCurveTo(x + w, y + h, x + w - radius, y + h);
                ctx.lineTo(x + radius, y + h);
                ctx.quadraticCurveTo(x, y + h, x, y + h - radius);
                ctx.lineTo(x, y + radius);
                ctx.quadraticCurveTo(x, y, x + radius, y);
                ctx.closePath();
                ctx.fill();
            }

            function draw() {
                ctx.fillStyle = "#111";
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // draw snake
                for (let i = 0; i < snake.length; i++) {
                    let color = i === 0 ? "lime" : "#66ff66";
                    drawRoundedRect(snake[i].x, snake[i].y, box, box, 6, color);
                }

                // draw food
                ctx.fillStyle = "red";
                ctx.beginPath();
                ctx.arc(food.x + box / 2, food.y + box / 2, box / 2.5, 0, Math.PI * 2);
                ctx.fill();

                // ðŸ›‘ stop here if paused (snake doesnâ€™t move)
                if (paused) return;

                // old head
                let snakeX = snake[0].x;
                let snakeY = snake[0].y;

                if (direction === "LEFT") snakeX -= box;
                if (direction === "UP") snakeY -= box;
                if (direction === "RIGHT") snakeX += box;
                if (direction === "DOWN") snakeY += box;

                // new head
                let newHead = { x: snakeX, y: snakeY };

                // eat food
                if (snakeX === food.x && snakeY === food.y) {
                    score++;
                    document.getElementById("score").textContent = "Score: " + score;
                    food = {
                        x: Math.floor(Math.random() * (canvas.width / box)) * box,
                        y: Math.floor(Math.random() * (canvas.height / box)) * box
                    };
                } else {
                    snake.pop();
                }

                // game over
                if (
                    snakeX < 0 ||
                    snakeY < 0 ||
                    snakeX >= canvas.width ||
                    snakeY >= canvas.height ||
                    collision(newHead, snake)
                ) {
                    clearInterval(game);
                    alert("ðŸ’€ Game Over! Your Score: " + score);
                }

                snake.unshift(newHead);
            }

            function restartGame() {
                initGame();
            }

            // Start first game
            initGame();
        </script>
    </body>
</html>
